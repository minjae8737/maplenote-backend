<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>메이플노트</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="stylesheet" href="../../static/css/custom.css" th:href="@{/css/custom.css}">

</head>
<body>

<!-- 메인 컨테이너 -->
<div class="container d-flex flex-column justify-content-center align-items-center min-vh-100">

    <!-- 입력 그룹 -->
    <div class="input-group mb-3" style="max-width: 400px;">
        <input
                id="characterName"
                type="text"
                class="form-control"
                placeholder="캐릭터 명을 입력하세요."
        />
        <button class="btn btn-primary" type="button" id="searchButton">
            검색
        </button>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>

<script>
    const characterInput = document.getElementById('characterName');
    const searchButton = document.getElementById('searchButton');
    let prevKey = "";

    function searchCharacterName() {
        const characterName = characterInput.value.trim();
        console.log("name : " + characterName);

        if (characterName) {
            // 검색 버튼 비활성화
            searchButton.disabled = true;

            setTimeout(() => {
                window.location.href = `/c/${characterName}`;
            });
        }
    }

    characterInput.addEventListener('keydown', function (event) {
        if (event.key === "Enter" && prevKey !== "Enter") {
            console.log(event.key);
            prevKey = "Enter";
            searchCharacterName();
            setTimeout(() => prevKey = "", 100); // 100ms 후 초기화
        }
    });

    searchButton.addEventListener('click', searchCharacterName);
</script>
</body>
</html>